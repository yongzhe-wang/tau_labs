---
import { getAllPosts } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";
import { collectionDateSort } from "@/utils/date";

// Latest Posts for Section 8
const MAX_POSTS = 3;
const allPosts = await getAllPosts();
const latestPosts = allPosts.sort(collectionDateSort).slice(0, MAX_POSTS);
---

<PageLayout meta={{ title: "Tau Labs" }}>
	<!-- Section 1: Hero -->
	<section class="mx-auto max-w-7xl px-4 sm:px-8 grid grid-cols-1 items-center gap-12 py-20 sm:py-32 lg:grid-cols-2">
		<div>
			<h1 class="mb-6 text-5xl leading-tight sm:text-6xl tracking-tight text-text-primary">
				<span class="font-bold block">AI hardware that ships.</span>
			</h1>
			<p class="mb-4 text-xl font-medium text-text-primary max-w-prose leading-relaxed">
				We design, optimize, and manufacture conversational devices — from prototype to mass production.
			</p>
			<p class="mb-8 text-lg text-text-secondary max-w-prose leading-relaxed">
				Boards, firmware, edge models, and factory execution for toys, IoT, and embedded AI products.
			</p>
			<div class="flex flex-wrap gap-4">
				<a
					href="/contact"
					class="bg-accent text-bgColor hover:opacity-90 rounded-lg px-6 py-3 text-lg font-semibold transition-opacity"
				>
					Start a Project
				</a>
				<a
					href="/solutions"
					class="border-accent text-accent hover:bg-accent hover:text-bgColor rounded-lg border px-6 py-3 text-lg font-semibold transition-colors"
				>
					View Reference Modules
				</a>
			</div>
		</div>
		<div class="flex aspect-video items-center justify-center rounded-xl bg-gray-800 p-8">
			<div class="text-center">
				<img src="/images/tau-01.png" alt="Tau-01" class="h-64 mx-auto mb-4 object-contain" />
				<p class="font-mono text-2xl font-semibold text-text-primary">Tau-01</p>
			</div>
		</div>
	</section>

	<!-- Section 1.5: Why We're Different (New Band) -->
	<section class="border-t border-gray-800 bg-gray-900/50 py-12">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<h2 class="mb-8 text-center text-2xl font-bold text-text-primary">Why teams choose Tau Labs</h2>
			<div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-5">
				{[
					{ label: "Prototype", value: "7–14 days" },
					{ label: "Pilot Run", value: "30–45 days" },
					{ label: "Targets", value: "BOM, Power, Latency" },
					{ label: "Deliverables", value: "Factory-ready Files" },
					{ label: "Privacy", value: "COPPA/GDPR Compliant" },
				].map((item) => (
					<div class="text-center">
						<p class="text-sm font-medium text-text-tertiary uppercase tracking-wider mb-1">{item.label}</p>
						<p class="text-lg font-bold text-text-primary">{item.value}</p>
					</div>
				))}
			</div>
		</div>
	</section>

	<!-- Section 2: Who & What -->
	<section class="border-t border-gray-800 py-20">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<h2 class="mb-12 text-center text-3xl font-bold text-text-primary">Built for teams shipping intelligent devices</h2>
			<div class="mb-12 grid grid-cols-1 gap-8 md:grid-cols-3">
				<div class="bg-gray-800/50 border-gray-700 rounded-xl border p-6">
					<h3 class="mb-2 text-xl font-bold text-text-primary">IoT & Smart Devices</h3>
					<p class="text-text-secondary leading-relaxed">Connected hardware powered by ESP32 and cloud AI.</p>
				</div>
				<div class="bg-gray-800/50 border-gray-700 rounded-xl border p-6">
					<h3 class="mb-2 text-xl font-bold text-text-primary">Consumer Devices & Toys</h3>
					<p class="text-text-secondary leading-relaxed">Engaging, voice-first interactive experiences.</p>
				</div>
				<div class="bg-gray-800/50 border-gray-700 rounded-xl border p-6">
					<h3 class="mb-2 text-xl font-bold text-text-primary">Industrial Systems</h3>
					<p class="text-text-secondary leading-relaxed">Ruggedized edge AI for predictive maintenance.</p>
				</div>
			</div>
			<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
				{[
					"Custom AI Compute Modules",
					"Conversational Device Platform",
					"Model optimization for edge",
					"Firmware & integration support",
				].map((item) => (
					<div class="border-gray-800 rounded-lg border bg-gray-900 p-4 text-center font-medium text-text-secondary">
						{item}
					</div>
				))}
			</div>
		</div>
	</section>

	<!-- Section: Our Models -->
	<section class="border-t border-gray-800 py-20">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<h2 class="mb-12 text-center text-3xl font-bold text-text-primary">Our Models</h2>
			<div class="grid grid-cols-1 gap-8 md:grid-cols-3">
				{[
					{ label: "Tau 01", img: "/images/tau-01.png" },
					{ label: "Tau 02", img: "/images/tau-02.png" },
					{ label: "Tau 03", img: "/images/tau-03.png" },
				].map((item) => (
					<div class="bg-gray-800/50 border-gray-700 rounded-xl border p-6 flex flex-col items-center transition-transform hover:scale-105">
						<div class="mb-4 w-full aspect-video bg-gray-900 rounded-lg overflow-hidden flex items-center justify-center border border-gray-700">
							<img src={item.img} alt={item.label} class="w-full h-full object-contain p-2" />
						</div>
						<h3 class="text-xl font-bold text-text-primary">{item.label}</h3>
					</div>
				))}
			</div>
		</div>
	</section>

	<!-- Section 3: Value Propositions -->
	<section class="border-t border-gray-800 py-20">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<h2 class="mb-12 text-3xl font-bold text-text-primary">Why teams work with Tau Labs</h2>
			<div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4">
				{[
					{
						title: "End-to-end co-design",
						desc: "From chip selection and board layout to model optimization and QA.",
					},
					{
						title: "Predictable performance",
						desc: "Latency, power, and BOM targets defined upfront and tracked.",
					},
					{
					title: "Conversation-first",
					desc: "Built from day one for on-device speech and dialogue.",
				},
				{
					title: "Factory-Direct Manufacturing",
					desc: "We produce directly with trusted factories at competitive prices, from prototype to scale.",
				},
			].map((item) => (
					<div>
						<h3 class="mb-3 text-xl font-bold text-text-primary">{item.title}</h3>
						<p class="text-text-secondary leading-relaxed">{item.desc}</p>
					</div>
				))}
			</div>
		</div>
	</section>

	<!-- Section 4: Case Highlights -->
	<section class="border-t border-gray-800 py-20">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<h2 class="mb-12 text-3xl font-bold text-text-primary">Case Highlights</h2>
			<div class="grid grid-cols-1 gap-8 md:grid-cols-2">
				<div
					class="hover:border-accent border-gray-700 group relative overflow-hidden rounded-xl border bg-gray-800 p-8 transition-colors"
				>
					<div class="text-accent mb-2 text-xs font-bold tracking-wider uppercase">Toy</div>
					<h3 class="mb-4 text-2xl font-bold text-text-primary">Voice-first educational toy</h3>
					<p class="mb-6 text-text-secondary leading-relaxed">
						On-device dialogue and cloud-sync stories for a leading kids brand.
					</p>
					<div class="mb-6 flex gap-4 font-mono text-sm text-text-tertiary">
						<span>30ms latency</span>
						<span>12h battery</span>
					</div>
					<a href="/case-studies" class="text-accent font-bold hover:underline">View case study &rarr;</a>
				</div>
				<div
					class="hover:border-accent border-gray-700 group relative overflow-hidden rounded-xl border bg-gray-800 p-8 transition-colors"
				>
					<div class="text-accent mb-2 text-xs font-bold tracking-wider uppercase">IoT</div>
					<h3 class="mb-4 text-2xl font-bold text-text-primary">Autonomous Inspection Drone</h3>
					<p class="mb-6 text-text-secondary leading-relaxed">
						Custom carrier board with dual NPU for real-time defect detection.
					</p>
					<div class="mb-6 flex gap-4 font-mono text-sm text-text-tertiary">
						<span>4 cameras</span>
						<span>IP67 rated</span>
					</div>
					<a href="/case-studies" class="text-accent font-bold hover:underline">View case study &rarr;</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Section 5: Process -->
	<section class="border-t border-gray-800 py-20">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<h2 class="mb-12 text-center text-3xl font-bold text-text-primary">From idea to shipped device</h2>
			<div class="grid grid-cols-1 gap-4 md:grid-cols-4">
				{[
					{ step: "01", title: "Discovery", desc: "Requirements & Feasibility" },
					{ step: "02", title: "Architecture", desc: "Prototyping & Selection" },
					{ step: "03", title: "Validation", desc: "Pilot Runs & Testing" },
					{ step: "04", title: "Production", desc: "Support & Handoff" },
				].map((item) => (
					<div class="border-l-2 border-gray-700 p-6">
						<div class="mb-2 text-4xl font-bold text-gray-700">{item.step}</div>
						<h3 class="mb-1 text-xl font-bold text-text-primary">{item.title}</h3>
						<p class="text-sm text-text-tertiary">{item.desc}</p>
					</div>
				))}
			</div>
		</div>
	</section>

	<!-- Section 6: Technology -->
	<section class="border-t border-gray-800 py-20">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<div class="flex flex-col items-start justify-between gap-12 md:flex-row">
				<div class="md:w-1/3">
					<h2 class="mb-4 text-3xl font-bold text-text-primary">What we work with</h2>
					<p class="mb-6 text-text-secondary leading-relaxed">We leverage the best-in-class tools for embedded AI.</p>
					<a href="/technology" class="text-accent font-bold hover:underline"
						>Explore our technology &rarr;</a
					>
				</div>
				<div class="grid w-full grid-cols-1 gap-8 sm:grid-cols-3 md:w-2/3">
					<div>
						<h3 class="mb-4 text-lg font-bold text-text-primary">AI & Models</h3>
						<ul class="space-y-2 text-text-tertiary">
							<li>ASR / TTS</li>
							<li>Cloud LLMs</li>
							<li>Vision Models</li>
						</ul>
					</div>
					<div>
						<h3 class="mb-4 text-lg font-bold text-text-primary">Hardware</h3>
						<ul class="space-y-2 text-text-tertiary">
							<li>Espressif ESP32</li>
							<li>Nordic Semi</li>
							<li>Low-power MCUs</li>
						</ul>
					</div>
					<div>
						<h3 class="mb-4 text-lg font-bold text-text-primary">Tooling</h3>
						<ul class="space-y-2 text-text-tertiary">
							<li>PyTorch / ONNX</li>
							<li>ESP-IDF</li>
							<li>FreeRTOS</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Section 8: Blog/Resources -->
	<section class="border-t border-gray-800 py-20">
		<div class="mx-auto max-w-7xl px-4 sm:px-8">
			<div class="mb-12 flex items-end justify-between">
				<h2 class="text-3xl font-bold text-text-primary">Insights & notes</h2>
				<a href="/posts" class="text-accent hover:underline">Browse all articles &rarr;</a>
			</div>
			<ul class="space-y-8">
				{
					latestPosts.map((p) => (
						<li class="grid items-baseline gap-4 sm:grid-cols-[auto_1fr]">
							<span class="min-w-[120px] font-mono text-sm text-text-tertiary">
								{p.data.publishDate.toLocaleDateString("en-US", {
									year: "numeric",
									month: "short",
									day: "numeric",
								})}
							</span>
							<div>
								<a
									href={`/posts/${p.id}/`}
									class="hover:text-accent text-xl font-bold transition-colors text-text-primary"
								>
									{p.data.title}
								</a>
								<p class="mt-2 line-clamp-2 text-text-secondary leading-relaxed">{p.data.description}</p>
							</div>
						</li>
					))
				}
			</ul>
		</div>
	</section>

	<!-- Section 9: Bottom CTA -->
	<section class="mx-auto max-w-7xl px-4 sm:px-8">
		<div class="bg-gray-800/30 my-20 rounded-3xl py-32 text-center">
			<h2 class="mb-6 text-4xl font-bold text-text-primary">Have a device or conversational toy in mind?</h2>
			<p class="mx-auto mb-10 max-w-2xl text-xl text-text-secondary leading-relaxed">
				Share your constraints and we’ll propose a hardware and AI plan.
			</p>
			<a
				href="/contact"
				class="bg-accent text-bgColor hover:opacity-90 rounded-lg px-8 py-4 text-xl font-semibold transition-opacity"
			>
				Start a project
			</a>
		</div>
	</section>
</PageLayout>
